<p-dialog
    [(visible)]="visibleEdit"
    [header]="'Atualizar Demanda'"
    [breakpoints]="{
        '900px': '50vw',
        '600px': '100vw'}"
    [style]="{width: '50vw'}"
    [modal]="true"
    [draggable]="false"
    [resizable]="false">
    <form [formGroup]="propertyForm"
          #formDir="ngForm"
          class="flex flex-column justify-content-center align-items-center"
          (ngSubmit)="updateDemand()">
        <div class="col-12 lg:col-12 sm:col-12 md:col-12">
            <div class="grid formgrid p-fluid">
                <div class="col-12 lg:col-6 md:col-12 sm:col-12 mb-3">
                            <span class="field p-float-label">
                                <p-dropdown
                                    [style]="{ width: '100%' }"
                                    formControlName="contractType"
                                    inputId="float-label"
                                    [options]="contractType"
                                    placeholder="Selecione o tipo de Contrato"
                                    name="contractType"
                                    id="contractType">
                                </p-dropdown>
                                <label for="float-label"
                                >Tipo de Contrato</label>
                            </span>
                </div>
                <div class="col-12 lg:col-6 md:col-6 sm:col-12 mb-3">
                            <span class="field p-float-label">
                                <p-dropdown
                                    formControlName="propertyType"
                                    inputId="float-label"
                                    [options]="propertyType"
                                    placeholder="Selecione o tipo de Imóvel"
                                    optionDisabled="inactive"
                                    name="propertyType"
                                    id="propertyType">
                                </p-dropdown>
                                <label for="float-label">Tipo de Imóvel</label>
                            </span>
                </div>
                <div class="col-12 lg:col-6 md:col-6 sm:col-12 mb-3"
                     *ngIf="selectedPropertyType != 'Loteamento'">
                            <span class="field p-float-label">
                                <p-dropdown
                                    formControlName="bedroomsNumber"
                                    inputId="float-label"
                                    [options]="bedroomsNumber"
                                    placeholder="Selecione a quantidade de quartos"
                                    name="bedroomsNumber"
                                    id="bedroomsNumber">
                                </p-dropdown>
                                <label for="float-label">Quantidade de Quartos</label>
                            </span>
                </div>
                <div class="col-12 lg:col-6 md:col-6 sm:col-12 mb-3"
                     *ngIf="selectedPropertyType != 'Loteamento'">
                            <span class="field p-float-label">
                                <p-dropdown
                                    formControlName="furnished"
                                    inputId="float-label"
                                    [options]="furnished"
                                    placeholder="Selecione se o imóvel e mobiliado"
                                    name="furnished"
                                    id="furnished">
                                </p-dropdown>
                                <label for="float-label">Mobiliado</label>
                            </span>
                </div>
                <div class="col-12 lg:col-6 md:col-6 sm:col-12 mb-3">
                            <span class="field p-float-label">
                                <p-dropdown
                                    formControlName="state"
                                    inputId="float-label"
                                    [options]="state"
                                    (onChange)="filterCities($event)"
                                    placeholder="Selecione o estado onde está o imóvel"
                                    name="state"
                                    id="state">
                                </p-dropdown>
                                <label for="float-label">Estado</label>
                            </span>
                </div>
                <div class="col-12 lg:col-6 md:col-6 sm:col-12 mb-3"
                     *ngIf="selectedPropertyType != 'Loteamento'">
                            <span class="field p-float-label">
                                <p-dropdown
                                    formControlName="petFriendly"
                                    inputId="float-label"
                                    [options]="petFriendly"
                                    placeholder="Selecione se o imóvel permite pets"
                                    name="petFriendly"
                                    id="petFriendly">
                                </p-dropdown>
                                <label for="float-label">Permite Pet</label>
                            </span>
                </div>

                <div class="col-12 lg:col-6 md:col-6 sm:col-12 mb-3">
                            <span class="field p-float-label">
                                <p-dropdown
                                    formControlName="city"
                                    inputId="float-label"
                                    [filter]="true"
                                    [showClear]="true"
                                    [options]="city"
                                    placeholder="Selecione a cidade do imóvel"
                                    name="city"
                                    id="city">
                                </p-dropdown>
                                <label for="float-label">Cidade</label>
                            </span>
                </div>
                <div
                    class="col-12 lg:col-6 md:col-6 sm:col-12 mb-3"
                    *ngIf="selectedContractType.value === 'Locação'">
                            <span class="field p-float-label">
                                <p-dropdown
                                    formControlName="suggestedValueForRent"
                                    inputId="float-label"
                                    [options]="suggestedValueForRent"
                                    placeholder="Selecione o valor desejado"
                                    name="suggestedValueForRent"
                                    id="suggestedValueForRent">
                                </p-dropdown>
                                <label for="float-label">Valor</label>
                            </span>
                </div>
                <div
                    class="col-12 lg:col-6 md:col-6 sm:col-12 mb-3"
                    *ngIf="selectedContractType.value === 'Venda'">
                            <span class="field p-float-label">
                                <p-dropdown
                                    formControlName="suggestedValueForSale"
                                    inputId="float-label"
                                    [options]="suggestedValueForSale"
                                    placeholder="Selecione o valor desejado"
                                    name="suggestedValueForSale"
                                    id="suggestedValueForSale">
                                </p-dropdown>
                                <label for="float-label">Valor</label>
                            </span>
                </div>
                <div
                    class="col-12 lg:col-6 md:col-6 sm:col-12 mb-3"
                    *ngIf="selectedContractType.value === 'Temporada'">
                            <span class="field p-float-label">
                                <p-dropdown
                                    formControlName="suggestedValueForSeasonal"
                                    inputId="float-label"
                                    [options]="suggestedValueForSeasonal"
                                    placeholder="Selecione o valor desejado"
                                    name="suggestedValueForSeasonal"
                                    id="suggestedValueForSeasonal">
                                </p-dropdown>
                                <label for="float-label">Valor</label>
                            </span>
                </div>
                <div class="col-12">
                    <div class="w-full">
                        <label class="ml-2">Anotações</label>
                        <textarea
                            class="mt-1"
                            [style]="{ width: '100%' }"
                            rows="5"
                            cols="30"
                            formControlName="annotation"
                            placeholder="Faça uma anotação"
                            pInputTextarea>
                                </textarea>
                    </div>
                </div>
                <div class="w-12 p-3">
                    <p-button
                        [disabled]="this.propertyForm.untouched || this.propertyForm.invalid"
                        type="submit"
                        label="Editar Imóvel"
                        [loading]="loading"
                        class="w-auto mt-4"
                        (onClick)="update()">
                    </p-button>
                </div>
            </div>
        </div>
    </form>
</p-dialog>

